import pandas as pd
import numpy as np

def process_data_and_generate_code(data: str):
    """
    Обрабатывает данные из строки в формате таблицы и генерирует код для вставки в ваш алгоритм.
    
    :param data: Таблица в текстовом формате (скопированная)
    :return: Сгенерированные строки для вставки в код
    """
    # Преобразуем текстовые данные в DataFrame
    from io import StringIO
    df = pd.read_csv(StringIO(data), sep="\t")

    # Убираем возможные пробелы и форматируем данные
    df.columns = [col.strip() for col in df.columns]
    df = df.replace(',', '.', regex=True)  # Заменяем запятые на точки для корректного чтения чисел
    df.iloc[:, 1:] = df.iloc[:, 1:].apply(pd.to_numeric, errors='coerce')  # Преобразуем строки в числа

    # Извлекаем данные для передачи в функцию
    data_array = df.iloc[:, 1:].to_numpy()

    # Генерация строк для вставки в код
    ndim = data_array.shape[1]
    print("\n# Сгенерированные строки для вставки:")
    print(f"Ip = {data_array.shape[0]}  # Количество начальных точек (число строк)")
    print(f"sigma = 0.5  # Примерное значение сигма")
    print(f"d = 40  # Процент новых клеток для добавления")
    print(f"K = 100  # Максимальное количество итераций")
    print(f"e = 0.1  # Порог изменения среднего значения популяции")
    print(f"beta = 10  # Коэффициент клонирования")
    print(f"Nc = 5  # Количество клонов на каждую точку")
    print(f"gamma = 10  # Коэффициент мутации")
    print(f"ndim = {ndim}  # Размерность данных (количество столбцов)")
    print(f"percent = 100  # Процент новых клеток")
    print(f"data_array = {data_array.tolist()}  # Данные для алгоритма (массив)")

# Пример данных в текстовом формате
data = """
Показатель/год	2007	2008	2009	2010	2011	2012	2013	2014	2015	2016	2017	2018	2019	2020	2021
Зарплаты и премии SA (Salaries and awards), млн, $ США	70,12	51,35	84,72	111,59	116,30	136,80	124,75	87,27	65,30	79,51	103,13	111,11	142,81	121,26	148,42
Доля владельцев акций в совете директоров OD (Ownership share in the board of Directors), %	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
Квалификация членов совета директоров QMD (Qualification of members of the board of Directors)	2	2	2	2	2	2	2	2	2	2	2	2	2	2	2
Среднесписочная численность персонала ANE (Average number of employees), чел 	5920	5731	6231	7449	7992	8024	8483	8658	8654	8638	8325	8528	8840	9124	9154
Инвестиции в повышение квалификации персонала IST (Investments in staff training), млн, $ США	52	31	47	50	58	131	123	83	17	14	15	17	36	33	50
Средняя зарплата на одного сотрудника ASPE (Average salary per employee), млн, $ США/чел	0,0118	0,0090	0,0136	0,0142	0,0131	0,0147	0,0136	0,0087	0,0070	0,0084	0,0115	0,0124	0,0152	0,0128	0,0133
Текучесть персонала SF (Staff Frequency), %	1,28	3,30	8,02	16,35	6,79	0,40	5,41	2,02	0,05	0,19	3,76	2,38	3,53	3,11	0,33
Выручка компании на одного сотрудника PP (Profit share per employee), млн, $ США/чел	0,071	0,055	0,075	0,067	0,073	0,120	0,107	0,071	0,040	0,033	0,035	0,040	0,038	0,034	0,050
Доля инвестиций в управление персоналом от выручки компании IHR (investments in human resources management), %	0,70	0,40	1,20	1,40	2,50	3,50	3,20	4,10	3,10	3,80	2,90	3,33	3,21	3,60	4,50
Инвестиции в здоровье персонала, IH (Investments in staff's healthcare), млн, $ США	1,03	0,76	1,28	1,59	1,82	1,95	1,83	1,20	0,95	1,20	1,34	1,21	1,48	1,33	1,36
Выручка компании RC (Company Reveneu), млн, $, США	418,79	314,83	465,90	496,24	581,85	959,96	906,72	610,75	343,53	284,63	290,98	340,12	332,09	307,22	457,17
Инвестиции в мобильность трудовых ресурсов ILM (Investments in labor mobility) , млн, $, США	0,63	0,43	0,58	0,65	0,74	0,74	0,76	0,42	0,33	0,36	0,44	0,41	0,53	0,64	0,83
"""

# Генерация кода
process_data_and_generate_code(data)
